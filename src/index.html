<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>Chicago Crime Analysis</title>
    <link rel="stylesheet" type="text/css" href="index.css">
</head>
<div style="height: 500px; background-image: url('chicago.jpg');">
    <h1 id = "tt">Chicago Crime Analysis from 2001-2019</h1>
    <h3>Explore the distribution of each crime type across Chicago over years</h3>
</div>

<!-- <div>
    <p id="note">
        *Percentage of each type may add up to be not equal to 100% due to rounding.</p>
</div>

<div>
    <p id="explain1">
        Hover over bars of years you are interetsed in to see how many homicide cases happened in that year. <br> <br>Click on bars of interested years to get more details about homicide cases in that year.</p>
</div>

<div>
    <p id="explain2">
        Hover over sectors you are interested in to see the percentage.</p>
</div>

<div style="position: absolute; top: 2000px; left: 10px; right: 60px; background-color: white; padding: 15px; font-size: 20px;">
    <h2>WriteUp</h2>
    <p>1. Rationale</p>
    <p>We first did an exploratory analysis of our chosen dataset: Chicago Crimes, 2001-present, and decided to focus on the data more recently from 2010 to 2019. Since we are most interested in homicide, we filtered our data by homicide. Then, we explored multiple dimensions and found “time” and “arrested” most interesting. Thus, we wanted to design an interactive visualization to show the time percentage of cases and percentage of arrested criminals in each year from 2010 to 2019. To show the number of cases vs year, we used a bar chart with x-axis being each year and y-axis being total cases. We encoded total cases into “height” of each bar since it is easy to compare total cases across years by just comparing the heights of bars. Then, we used a donut chart to show the percentage of cases in each time region and another donut chart to show the percentage of arrested and unarrested criminals. We used each color to represent each kind (time region, whether arrested) and used the area of each sector to represent the corresponding percentage. We used a donut chart instead of a pie chart because a donut chart has an empty space in the center where we can add information like tips. Also, we included a legend for each donut chart to make it clear which sector belongs to which kind. For the interaction techniques, we chose hover and click. For all the charts, on mouse over bars or sectors of donut charts, it will show a tip of the exact number of the bar or sector. For the bar chart, the tip is right on the top of each bar; for the donut charts, the tip is fixed in the center of the donut chart. We chose such positions of tips because they will not intersect with other bars or sectors and thus will not influence readings of the whole graph. Then, if the mouse clicks on the bar, it will show the donut charts of the time percentage of cases and the arrested percentage in that corresponding year (the donut chart is shown at the exactly same position as the bar chart). We used two labels to let the user choose which one they want to view. Also, there is a “back” button at the left of those two labels to let the user go back to the main bar chart to view more interesting years. After the user clicks on the back button, the tip of the year that the user clicked remains on top of that bar, and we made this design choice because we wanted to let users know which year they just clicked on.</p>
    <p>2. Alternative</p>
    <p>During our visualization design process, we first come up with the idea of only using hover as interaction. The original idea was when users hover on a certain bar for the year they are interested in, show two more boxes on the chart which they can hover into, when they hover into one of those boxes, either donut chart about time period or donut chart about arrest percentage will appear. But after considering the problem of users may want to explore the donut chart leading mouse off the bar chart area, this may cause the problem of donut chart disappear when users try to explore it. Also, this involves nested hover which may be hard for users to understand and for us to implement. So we reconsidered our design and added click as the interaction for getting donut charts of the year the users are interested in because we found most people will click on the object after they hover on it and discover that they can interact with it. Also, in our first design we were planning to use pie charts for showing  time and arrested details of cases in a year. But when we were adding tips to the pie chart, we found the moving tip when hovering over different sectors hard to follow. So we came up with the idea of using donut charts and always putting tip in the middle when users hover over different sectors for continuity of interaction. At the middle of realizing our design, we came over the problem of combining bar chart and donut chart into the same page, so we tried to go over this problem by redirecting users to the page with donut chart after they click on a certain bar. But after thinking over it, we feel that the reloading of page may break the continuity of users’ experience on exploring data so we ended up not using this strategy.</p>
    <p>3. Work Split</p>
    <p>Design visualization: all of us</p> 
    <p>Data reorganization: Chris Nie, Kexuan Liu</p>
    <p>Design the style of website: Kexuan Liu, Ivy Wang</p>
    <p>Add annotation/explanation to website: Chris Nie</p>
    <p>Draw bar chart and donut chart: Kexuan Liu</p>
    <p>Make interaction between bar chart and donut chart: Chris Nie, Ivy Wang</p>
    <p>Add mouseover event(tips and highlight): Chris Nie, Ivy Wang</p>
    <p>Make website work properly on online: Kexuan Liu, Ivy Wang</p>
    <p>Write up: All of us</p>
    <p>We choose to meet up together to do this project and we basically have one person do the actual coding, other people help to debug.</p>
    <p>4. Development Process</p>
    <p>Each person spent about 14 hours on this project. We spent most time working with d3 to make the interaction/graph work properly. For the design part, we didn’t spend much time on the design of visualization but the design keeps changing when we develop our application. We keep adjusting our design to make it realizable and user friendly. For the implementation part,  all of us are new to d3, so we spent a lot of time looking at examples online and trying to learn and use technique in our project.It is interesting to learn a new coding language by looking at examples. We first tried to understand the code then apply it to our own data.</p>
</div> -->

<body>
	<!-- <div id="control" style="display: none">
	    <form>
	    	<div class="button_cont" align="center" id="button" type="button">Back to All Years</div>
	        <label class="select"><input type="radio" name="dataset" value="time_percentage" id = "r" checked> Time Period Percentage</label>
	        <label class="select"><input type="radio" name="dataset" value="arrested_percentage"> Arrested Percentage</label>
	    </form>
	</div> -->
    <div id="sy">Crime Type</div>
    <select id="inds">
        <option value="0" selected="selected">All</option>
        <option value="1">Arson</option>
        <option value="2">Assault</option>
        <option value="3">Battery</option>
        <option value="4">Burglary</option>
        <option value="5">Concealed Carry License Violation</option>
        <option value="6">Crim Sexual Assault</option>
        <option value="7">Criminal Damage</option>
        <option value="8">Criminal Trespass</option>
        <option value="9">Deceptive Practice</option>
        <option value="10">Domestic Violence</option>
        <option value="11">Gambling</option>
        <option value="12">Homicide</option>
        <option value="13">Human Trafficking</option>
        <option value="14">Interference With Public Officer</option>
        <option value="15">Intimidation</option>
        <option value="16">Kidnapping</option>
        <option value="17">Liquor Law Violation</option>
        <option value="18">Motor Vehicle Theft</option>
        <option value="19">Narcotics</option>
        <option value="20">Obscenity</option>
        <option value="21">Offense Involving Children</option>
        <option value="22">Other Narcotic Violation</option>
        <option value="23">Other Offense</option>
        <option value="24">Prostitution</option>
        <option value="25">Public Indecency</option>
        <option value="26">Public Peace Violation</option>
        <option value="27">Ritualism</option>
        <option value="28">Robbery</option>
        <option value="29">Sex Offense</option>
        <option value="30">Stalking</option>
        <option value="31">Theft</option>
        <option value="32">Weapons Violation</option>
    </select>
    <div id="legendId">
        <p id="legendLabel">Crime Cases</p>
    </div>

<!-- load the d3.js library -->
</body>

<style>
    /* tell the SVG path to be a thin blue line without any area fill */
    path {
        stroke: steelblue;
        stroke-width: 1;
        fill: none;
    }    
    .axis {
      shape-rendering: crispEdges;
    }
    .x.axis line {
      stroke: lightgrey;
    }
    .x.axis .minor {
      stroke-opacity: .5;
    }
    .x.axis path {
      display: none;
    }
    .y.axis line, .y.axis path {
      fill: none;
      stroke: #000;
    }
</style>

<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://unpkg.com/d3-simple-slider"></script>
<div id="mapArea"></div>
<div id="slider"></div>
<div style="position: absolute; top: 1220px; left: 95px;" id="year"></div>
<div class="button" style="position: absolute; top: 1135px; left: 30px;" align="center" id="button1" type="button">Play</div>
<div class="button" style="position: absolute; top: 1170px; left: 30px;" align="center" id="button2" type="button">Reset</div>
<div id="lineChart"></div>
<div id="barChart" style="position: absolute; top: 1225px; left: 850px"></div>
<script src="d3-tip.js"></script>
<script src="index.js"></script>
